# ğŸš€ å®æ–½è®¡åˆ’ä¸æŠ€æœ¯é€‰å‹

## 1. æŠ€æœ¯é€‰å‹å¯¹æ¯”åˆ†æ

### 1.1 åç«¯æ¡†æ¶é€‰å‹

| æ¡†æ¶ | ä¼˜åŠ¿ | åŠ£åŠ¿ | è¯„åˆ† | æ¨èåº¦ |
|------|------|------|------|--------|
| **FastAPI** | âœ… é«˜æ€§èƒ½ (åŸºäºStarlette)<br>âœ… è‡ªåŠ¨ç”ŸæˆAPIæ–‡æ¡£<br>âœ… ç±»å‹æç¤ºæ”¯æŒ<br>âœ… å¼‚æ­¥åŸç”Ÿæ”¯æŒ<br>âœ… ç°ä»£åŒ–è®¾è®¡ | âš ï¸ ç”Ÿæ€ç›¸å¯¹å¹´è½» | â­â­â­â­â­ | **å¼ºçƒˆæ¨è** |
| Flask | âœ… ç®€å•æ˜“å­¦<br>âœ… ç”Ÿæ€æˆç†Ÿ<br>âœ… çµæ´»æ€§é«˜ | âŒ æ€§èƒ½è¾ƒä½<br>âŒ éœ€è¦æ‰‹å†™APIæ–‡æ¡£<br>âŒ å¼‚æ­¥æ”¯æŒæœ‰é™ | â­â­â­ | ä¸€èˆ¬ |
| Django | âœ… åŠŸèƒ½å…¨é¢<br>âœ… ç®¡ç†åå° | âŒ è¿‡äºé‡é‡çº§<br>âŒ å­¦ä¹ æ›²çº¿é™¡å³­<br>âŒ å¯¹æœ¬é¡¹ç›®åŠŸèƒ½è¿‡å‰© | â­â­ | ä¸æ¨è |

**é€‰æ‹©**: **FastAPI** - æ€§èƒ½ä¼˜å¼‚ï¼Œç°ä»£åŒ–ï¼Œè‡ªåŠ¨æ–‡æ¡£ç”Ÿæˆï¼Œå®Œç¾æ”¯æŒå¼‚æ­¥

### 1.2 å‰ç«¯æ¡†æ¶é€‰å‹

| æ–¹æ¡ˆ | ä¼˜åŠ¿ | åŠ£åŠ¿ | è¯„åˆ† | æ¨èåº¦ |
|------|------|------|------|--------|
| **HTML + Tailwind + Alpine.js** | âœ… è½»é‡çº§ (50KB)<br>âœ… æ— éœ€æ„å»ºå·¥å…·<br>âœ… å­¦ä¹ æˆæœ¬ä½<br>âœ… ç›´æ¥éƒ¨ç½²<br>âœ… å“åº”å¼åŸç”Ÿæ”¯æŒ | âš ï¸ å¤æ‚äº¤äº’èƒ½åŠ›æœ‰é™ | â­â­â­â­â­ | **å¼ºçƒˆæ¨è** |
| React + Vite | âœ… åŠŸèƒ½å¼ºå¤§<br>âœ… ç”Ÿæ€ä¸°å¯Œ | âŒ éœ€è¦æ„å»ºæ­¥éª¤<br>âŒ ä½“ç§¯è¾ƒå¤§<br>âŒ å¯¹æœ¬é¡¹ç›®è¿‡åº¦å·¥ç¨‹åŒ– | â­â­â­ | ä¸€èˆ¬ |
| Vue 3 | âœ… æ˜“å­¦æ˜“ç”¨<br>âœ… å“åº”å¼å¼º | âŒ éœ€è¦æ„å»ºæ­¥éª¤<br>âŒ å¢åŠ å¤æ‚åº¦ | â­â­â­ | ä¸€èˆ¬ |

**é€‰æ‹©**: **HTML + Tailwind CSS + Alpine.js** - è½»é‡ã€ç¾è§‚ã€æ— éœ€æ„å»ºï¼Œé€‚åˆå•é¡µåº”ç”¨

### 1.3 æ•°æ®åº“é€‰å‹

| æ•°æ®åº“ | ä¼˜åŠ¿ | åŠ£åŠ¿ | è¯„åˆ† | æ¨èåº¦ |
|--------|------|------|------|--------|
| **SQLite** | âœ… é›¶é…ç½®<br>âœ… å•æ–‡ä»¶å­˜å‚¨<br>âœ… è½»é‡çº§<br>âœ… è¶³å¤Ÿæ€§èƒ½ | âš ï¸ ä¸æ”¯æŒé«˜å¹¶å‘å†™å…¥ | â­â­â­â­â­ | **å¼ºçƒˆæ¨è** |
| PostgreSQL | âœ… åŠŸèƒ½å¼ºå¤§<br>âœ… é«˜æ€§èƒ½ | âŒ éœ€è¦é¢å¤–å®¹å™¨<br>âŒ é…ç½®å¤æ‚<br>âŒ å¯¹æœ¬é¡¹ç›®è¿‡å‰© | â­â­â­ | æ‰©å±•æ—¶è€ƒè™‘ |
| MySQL | âœ… ç”Ÿæ€æˆç†Ÿ | âŒ é…ç½®å¤æ‚<br>âŒ èµ„æºå ç”¨ | â­â­ | ä¸æ¨è |

**é€‰æ‹©**: **SQLite** - é›¶é…ç½®ï¼Œè¶³å¤Ÿæ€§èƒ½ï¼Œæ–¹ä¾¿å¤‡ä»½å’Œè¿ç§»

### 1.4 å®¹å™¨åŒ–æ–¹æ¡ˆ

| æ–¹æ¡ˆ | è¯´æ˜ | è¯„åˆ† |
|------|------|------|
| **Docker + Docker Compose** âœ… | æ ‡å‡†åŒ–å®¹å™¨æ–¹æ¡ˆï¼Œæ˜“äºéƒ¨ç½²å’Œè¿ç§» | â­â­â­â­â­ |
| Kubernetes | è¿‡åº¦å·¥ç¨‹åŒ–ï¼Œä¸é€‚åˆå•æœºéƒ¨ç½² | â­â­ |
| ç›´æ¥éƒ¨ç½² | ç¯å¢ƒä¾èµ–é—®é¢˜ï¼Œä¸æ¨è | â­ |

**é€‰æ‹©**: **Docker + Docker Compose** - å·¥ä¸šæ ‡å‡†ï¼Œæ˜“ç”¨æ€§å’Œå¯ç§»æ¤æ€§æœ€ä½³

## 2. è¯¦ç»†å®æ–½è®¡åˆ’

### 2.1 Phase 1: åŸºç¡€æ¶æ„æ­å»º (3å¤©)

#### Day 1: é¡¹ç›®åˆå§‹åŒ–å’ŒDockerç¯å¢ƒ

**ä¸Šåˆ (4h)**
- [x] åˆ›å»ºé¡¹ç›®ç›®å½•ç»“æ„
- [ ] ç¼–å†™ Dockerfile (åç«¯)
- [ ] ç¼–å†™ docker-compose.yml
- [ ] é…ç½®ç¯å¢ƒå˜é‡æ¨¡æ¿ (.env.example)

**ä¸‹åˆ (4h)**
- [ ] é…ç½® Nginx
- [ ] è®¾ç½® Python è™šæ‹Ÿç¯å¢ƒ
- [ ] å®‰è£…æ ¸å¿ƒä¾èµ–
- [ ] æµ‹è¯•å®¹å™¨å¯åŠ¨

**äº§å‡ºç‰©**:
- âœ… å®Œæ•´çš„é¡¹ç›®ç»“æ„
- âœ… å¯è¿è¡Œçš„ Docker ç¯å¢ƒ
- âœ… åŸºç¡€é…ç½®æ–‡ä»¶

#### Day 2: åç«¯æ¡†æ¶æ­å»º

**ä¸Šåˆ (4h)**
- [ ] FastAPI åº”ç”¨åˆå§‹åŒ–
- [ ] é…ç½®ç®¡ç†æ¨¡å— (config.py)
- [ ] æ•°æ®åº“æ¨¡å‹è®¾è®¡ (SQLAlchemy)
- [ ] æ—¥å¿—ç³»ç»Ÿé…ç½® (loguru)

**ä¸‹åˆ (4h)**
- [ ] API è·¯ç”±ç»“æ„
- [ ] ä¸­é—´ä»¶é…ç½® (CORS, é”™è¯¯å¤„ç†)
- [ ] å¥åº·æ£€æŸ¥ç«¯ç‚¹
- [ ] API æ–‡æ¡£é…ç½® (Swagger)

**äº§å‡ºç‰©**:
- âœ… åŸºç¡€ FastAPI åº”ç”¨
- âœ… æ•°æ®åº“æ¨¡å‹
- âœ… é…ç½®ç³»ç»Ÿ

#### Day 3: å‰ç«¯åŸºç¡€ç•Œé¢

**ä¸Šåˆ (4h)**
- [ ] HTML é¡µé¢ç»“æ„
- [ ] Tailwind CSS é…ç½®
- [ ] åŸºç¡€ç»„ä»¶è®¾è®¡
  - å¯¼èˆªæ 
  - å‚æ•°é…ç½®é¢æ¿
  - å›¾åƒå±•ç¤ºåŒº

**ä¸‹åˆ (4h)**
- [ ] Alpine.js é›†æˆ
- [ ] ä¸»é¢˜åˆ‡æ¢åŠŸèƒ½
- [ ] å“åº”å¼å¸ƒå±€è°ƒæ•´
- [ ] é™æ€èµ„æºä¼˜åŒ–

**äº§å‡ºç‰©**:
- âœ… ç¾è§‚çš„ UI ç•Œé¢
- âœ… å“åº”å¼å¸ƒå±€
- âœ… åŸºç¡€äº¤äº’åŠŸèƒ½

### 2.2 Phase 2: æ ¸å¿ƒåŠŸèƒ½å¼€å‘ (4å¤©)

#### Day 4: ç«å±±å¼•æ“ SDK é›†æˆ

**ä¸Šåˆ (4h)**
- [ ] å®‰è£… volcengine-python-sdk
- [ ] å°è£… VolcEngineClient ç±»
- [ ] å®ç°è®¤è¯å’Œåˆå§‹åŒ–
- [ ] æµ‹è¯• API è¿æ¥

**ä¸‹åˆ (4h)**
- [ ] å®ç°å›¾åƒç”Ÿæˆæ–¹æ³•
- [ ] é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶
- [ ] æ—¥å¿—è®°å½•
- [ ] å•å…ƒæµ‹è¯•

**å…³é”®ä»£ç ç¤ºä¾‹**:
```python
class VolcEngineClient:
    def __init__(self, access_key: str, secret_key: str):
        self.access_key = access_key
        self.secret_key = secret_key
        self.client = self._init_client()
    
    async def generate_image(self, params: GenerateParams) -> dict:
        """è°ƒç”¨ç«å±±å¼•æ“ç”Ÿæˆå›¾åƒ"""
        try:
            response = await self.client.visual_service.generate(
                prompt=params.prompt,
                model=params.model,
                # ... å…¶ä»–å‚æ•°
            )
            return response
        except Exception as e:
            logger.error(f"ç”Ÿæˆå¤±è´¥: {e}")
            raise
```

#### Day 5: å›¾åƒç”ŸæˆæœåŠ¡

**ä¸Šåˆ (4h)**
- [ ] ImageGeneratorService å®ç°
- [ ] å‚æ•°éªŒè¯é€»è¾‘
- [ ] åˆ›å»ºä»»åŠ¡æ¥å£
- [ ] ä»»åŠ¡çŠ¶æ€ç®¡ç†

**ä¸‹åˆ (4h)**
- [ ] å¼‚æ­¥ä»»åŠ¡å¤„ç†
- [ ] å›¾ç‰‡ä¸‹è½½å’Œä¿å­˜
- [ ] ç¼©ç•¥å›¾ç”Ÿæˆ
- [ ] ç»“æœè¿”å›å¤„ç†

**å…³é”®é€»è¾‘**:
```python
class ImageGeneratorService:
    async def create_task(self, request: GenerateRequest) -> str:
        """åˆ›å»ºç”Ÿæˆä»»åŠ¡"""
        task = Task(
            task_id=str(uuid.uuid4()),
            status=TaskStatus.PENDING,
            prompt=request.prompt,
            # ... å…¶ä»–å­—æ®µ
        )
        db.add(task)
        await db.commit()
        
        # æäº¤åˆ°åå°å¤„ç†é˜Ÿåˆ—
        await task_queue.put(task.task_id)
        
        return task.task_id
    
    async def process_task(self, task_id: str):
        """å¤„ç†ç”Ÿæˆä»»åŠ¡"""
        task = await db.get(Task, task_id)
        task.status = TaskStatus.PROCESSING
        await db.commit()
        
        try:
            # è°ƒç”¨ç«å±±å¼•æ“ API
            result = await volc_client.generate_image(...)
            
            # ä¸‹è½½å¹¶ä¿å­˜å›¾ç‰‡
            images = await self._save_images(result)
            
            # æ›´æ–°ä»»åŠ¡çŠ¶æ€
            task.status = TaskStatus.COMPLETED
            task.result_images = images
            await db.commit()
        except Exception as e:
            task.status = TaskStatus.FAILED
            task.error_message = str(e)
            await db.commit()
```

#### Day 6: ä»»åŠ¡ç®¡ç†ç³»ç»Ÿ

**ä¸Šåˆ (4h)**
- [ ] TaskManager å®ç°
- [ ] å¼‚æ­¥é˜Ÿåˆ—ç®¡ç†
- [ ] å¹¶å‘æ§åˆ¶
- [ ] ä»»åŠ¡æŸ¥è¯¢æ¥å£

**ä¸‹åˆ (4h)**
- [ ] ä»»åŠ¡å–æ¶ˆåŠŸèƒ½
- [ ] ä»»åŠ¡é‡è¯•æœºåˆ¶
- [ ] å®šæ—¶æ¸…ç†ä»»åŠ¡
- [ ] æ€§èƒ½ä¼˜åŒ–

#### Day 7: å­˜å‚¨æœåŠ¡

**ä¸Šåˆ (4h)**
- [ ] StorageService å®ç°
- [ ] æ–‡ä»¶ç³»ç»Ÿç®¡ç†
- [ ] å›¾ç‰‡ä¿å­˜é€»è¾‘
- [ ] ç¼©ç•¥å›¾ç”Ÿæˆ (Pillow)

**ä¸‹åˆ (4h)**
- [ ] å­˜å‚¨ç©ºé—´ç®¡ç†
- [ ] å®šæœŸæ¸…ç†ç­–ç•¥
- [ ] æ–‡ä»¶è®¿é—®æ¥å£
- [ ] ä¸‹è½½åŠŸèƒ½

### 2.3 Phase 3: å‰åç«¯é›†æˆ (3å¤©)

#### Day 8: API é›†æˆ

**ä¸Šåˆ (4h)**
- [ ] å‰ç«¯ API è°ƒç”¨å°è£… (api.js)
- [ ] åˆ›å»ºç”Ÿæˆä»»åŠ¡æ¥å£
- [ ] ä»»åŠ¡çŠ¶æ€è½®è¯¢
- [ ] é”™è¯¯å¤„ç†

**ä¸‹åˆ (4h)**
- [ ] å›¾ç‰‡åŠ è½½å’Œå±•ç¤º
- [ ] ä¸‹è½½åŠŸèƒ½å®ç°
- [ ] å†å²è®°å½•æ¥å£
- [ ] è”è°ƒæµ‹è¯•

**å‰ç«¯æ ¸å¿ƒä»£ç **:
```javascript
// api.js
export const api = {
  async generateImage(params) {
    const response = await fetch('/api/v1/generate', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(params)
    });
    if (!response.ok) throw new Error('ç”Ÿæˆå¤±è´¥');
    return response.json();
  },
  
  async getTaskStatus(taskId) {
    const response = await fetch(`/api/v1/task/${taskId}`);
    return response.json();
  }
};

// ä½¿ç”¨
async function handleGenerate() {
  try {
    const { task_id } = await api.generateImage(formData);
    pollTaskStatus(task_id);
  } catch (error) {
    showError(error.message);
  }
}
```

#### Day 9: UI/UX å®Œå–„

**ä¸Šåˆ (4h)**
- [ ] åŠ è½½åŠ¨ç”»å’Œè¿›åº¦æ¡
- [ ] Toast é€šçŸ¥ç»„ä»¶
- [ ] æ¨¡æ€æ¡†ç»„ä»¶
- [ ] è¡¨å•éªŒè¯åé¦ˆ

**ä¸‹åˆ (4h)**
- [ ] å›¾ç‰‡ç½‘æ ¼å¸ƒå±€ä¼˜åŒ–
- [ ] å›¾ç‰‡é¢„è§ˆåŠŸèƒ½
- [ ] æ‹–æ‹½æ’åº (å¯é€‰)
- [ ] å¿«æ·é”®æ”¯æŒ

#### Day 10: å†å²è®°å½•åŠŸèƒ½

**ä¸Šåˆ (4h)**
- [ ] å†å²è®°å½•æ•°æ®æ¨¡å‹
- [ ] åç«¯å†å²æŸ¥è¯¢ API
- [ ] åˆ†é¡µå’Œè¿‡æ»¤
- [ ] åˆ é™¤åŠŸèƒ½

**ä¸‹åˆ (4h)**
- [ ] å‰ç«¯å†å²è®°å½•é¢æ¿
- [ ] åŠ è½½å†å²ä»»åŠ¡
- [ ] å¿«é€Ÿé‡æ–°ç”Ÿæˆ
- [ ] å†å²è®°å½•æœç´¢

### 2.4 Phase 4: å®Œå–„å’Œä¼˜åŒ– (3å¤©)

#### Day 11: é”™è¯¯å¤„ç†å’Œå¼‚å¸¸

**ä¸Šåˆ (4h)**
- [ ] å…¨å±€å¼‚å¸¸å¤„ç†å™¨
- [ ] è‡ªå®šä¹‰å¼‚å¸¸ç±»
- [ ] é”™è¯¯æ—¥å¿—è®°å½•
- [ ] API é”™è¯¯å“åº”æ ‡å‡†åŒ–

**ä¸‹åˆ (4h)**
- [ ] å‰ç«¯é”™è¯¯å¤„ç†
- [ ] ç½‘ç»œè¶…æ—¶å¤„ç†
- [ ] é‡è¯•é€»è¾‘
- [ ] ç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º

#### Day 12: æ€§èƒ½ä¼˜åŒ–

**ä¸Šåˆ (4h)**
- [ ] æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–
- [ ] æ·»åŠ ç´¢å¼•
- [ ] å›¾ç‰‡ç¼“å­˜ç­–ç•¥
- [ ] API å“åº”å‹ç¼©

**ä¸‹åˆ (4h)**
- [ ] å‰ç«¯èµ„æºä¼˜åŒ–
- [ ] å›¾ç‰‡æ‡’åŠ è½½
- [ ] ä»£ç åˆ†å‰² (å¦‚éœ€è¦)
- [ ] æ€§èƒ½æµ‹è¯•

#### Day 13: æ–‡æ¡£å’Œæµ‹è¯•

**ä¸Šåˆ (4h)**
- [ ] å®Œå–„ README.md
- [ ] ç¼–å†™éƒ¨ç½²æ–‡æ¡£
- [ ] API æ–‡æ¡£è¡¥å……
- [ ] ç”¨æˆ·ä½¿ç”¨æ‰‹å†Œ

**ä¸‹åˆ (4h)**
- [ ] é›†æˆæµ‹è¯•
- [ ] åŠŸèƒ½æµ‹è¯•æ¸…å•
- [ ] æ€§èƒ½æµ‹è¯•
- [ ] éƒ¨ç½²éªŒè¯

## 3. å¼€å‘ä¼˜å…ˆçº§

### P0 (å¿…é¡»å®Œæˆ)
- âœ… Docker ç¯å¢ƒ
- [ ] åŸºç¡€ UI ç•Œé¢
- [ ] ç«å±±å¼•æ“ API é›†æˆ
- [ ] å›¾åƒç”Ÿæˆæ ¸å¿ƒåŠŸèƒ½
- [ ] ä»»åŠ¡çŠ¶æ€æŸ¥è¯¢
- [ ] å›¾ç‰‡å±•ç¤ºå’Œä¸‹è½½

### P1 (é‡è¦)
- [ ] å†å²è®°å½•
- [ ] é”™è¯¯å¤„ç†
- [ ] å‚æ•°é…ç½®é¢æ¿
- [ ] å“åº”å¼è®¾è®¡
- [ ] åŸºç¡€æ–‡æ¡£

### P2 (å¯é€‰)
- [ ] ä¸»é¢˜åˆ‡æ¢
- [ ] é«˜çº§å‚æ•°
- [ ] æ‰¹é‡ä¸‹è½½
- [ ] å¿«æ·é”®
- [ ] å›¾ç‰‡é¢„è§ˆæ”¾å¤§

### P3 (æœªæ¥)
- [ ] ç”¨æˆ·ç³»ç»Ÿ
- [ ] æ ‡ç­¾ç®¡ç†
- [ ] æç¤ºè¯æ¨¡æ¿
- [ ] WebSocket å®æ—¶æ¨é€
- [ ] å›¾ç‰‡ç¼–è¾‘åŠŸèƒ½

## 4. æŠ€æœ¯å®ç°ç»†èŠ‚

### 4.1 æ ¸å¿ƒä¾èµ–æ¸…å•

**Python åç«¯** (requirements.txt):
```txt
# Web æ¡†æ¶
fastapi==0.104.1
uvicorn[standard]==0.24.0
python-multipart==0.0.6

# æ•°æ®åº“
sqlalchemy==2.0.23
alembic==1.12.1
aiosqlite==0.19.0

# ç«å±±å¼•æ“ SDK
volcengine-python-sdk==1.0.90

# å·¥å…·åº“
pydantic==2.5.0
pydantic-settings==2.1.0
python-dotenv==1.0.0
httpx==0.25.2
aiofiles==23.2.1

# å›¾ç‰‡å¤„ç†
Pillow==10.1.0

# æ—¥å¿—
loguru==0.7.2

# å¼€å‘å·¥å…·
black==23.12.0
flake8==6.1.0
mypy==1.7.1
pytest==7.4.3
pytest-asyncio==0.21.1
pytest-cov==4.1.0
```

**å‰ç«¯èµ„æº**:
```html
<!-- CDN å¼•å…¥ -->
<script src="https://cdn.tailwindcss.com"></script>
<script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
```

### 4.2 ç›®å½•ç»“æ„åˆ›å»ºè„šæœ¬

```bash
#!/bin/bash
# åˆ›å»ºå®Œæ•´çš„é¡¹ç›®ç»“æ„

mkdir -p backend/app/{api,services,models,utils}
mkdir -p backend/data/{images,thumbnails}
mkdir -p backend/logs
mkdir -p backend/tests/{unit,integration}
mkdir -p frontend/static/{css,js,images/icons}
mkdir -p frontend/templates
mkdir -p docs

touch backend/app/__init__.py
touch backend/app/api/__init__.py
touch backend/app/services/__init__.py
touch backend/app/models/__init__.py
touch backend/app/utils/__init__.py

echo "é¡¹ç›®ç»“æ„åˆ›å»ºå®Œæˆï¼"
```

### 4.3 ç¯å¢ƒå˜é‡é…ç½®

**.env.example**:
```env
# ============================================
# ç«å±±å¼•æ“é…ç½® (å¿…å¡«)
# ============================================
# è®¿é—®å¯†é’¥ - ä»ç«å±±å¼•æ“æ§åˆ¶å°è·å–
# https://console.volcengine.com/iam/keymanage/
VOLC_ACCESS_KEY=AKLT*********************
VOLC_SECRET_KEY=**********************

# APIåŒºåŸŸ
VOLC_REGION=cn-beijing

# ä½¿ç”¨çš„æœåŠ¡
VOLC_SERVICE=cv

# ============================================
# åº”ç”¨é…ç½®
# ============================================
# åº”ç”¨åç§°
APP_NAME=VolcEngine Image Generator

# å¯¹å¤–è®¿é—®ç«¯å£
APP_PORT=8080

# åç«¯æœåŠ¡ç«¯å£ (å®¹å™¨å†…éƒ¨)
BACKEND_PORT=8000

# è°ƒè¯•æ¨¡å¼ (ç”Ÿäº§ç¯å¢ƒè®¾ä¸º false)
APP_DEBUG=false

# æ—¥å¿—çº§åˆ« (DEBUG, INFO, WARNING, ERROR)
APP_LOG_LEVEL=INFO

# åº”ç”¨å¯†é’¥ (ç”¨äºåŠ å¯†,è¯·ä¿®æ”¹ä¸ºéšæœºå­—ç¬¦ä¸²)
SECRET_KEY=change-this-to-a-random-secret-key-min-32-chars

# ============================================
# æ•°æ®åº“é…ç½®
# ============================================
# SQLite æ•°æ®åº“è·¯å¾„
DATABASE_URL=sqlite+aiosqlite:///./data/database.db

# ============================================
# å­˜å‚¨é…ç½®
# ============================================
# æ•°æ®å­˜å‚¨ç›®å½•
DATA_DIR=./data

# å›¾ç‰‡å­˜å‚¨ç›®å½•
IMAGE_DIR=./data/images

# ç¼©ç•¥å›¾ç›®å½•
THUMBNAIL_DIR=./data/thumbnails

# å†å²è®°å½•ä¿ç•™å¤©æ•°
MAX_HISTORY_DAYS=30

# æœ€å¤§å­˜å‚¨ç©ºé—´ (GB)
MAX_STORAGE_GB=100

# è‡ªåŠ¨æ¸…ç†è¿‡æœŸæ–‡ä»¶
AUTO_CLEANUP=true

# ============================================
# æ€§èƒ½é…ç½®
# ============================================
# æœ€å¤§å¹¶å‘ç”Ÿæˆä»»åŠ¡
MAX_CONCURRENT_TASKS=5

# API è¯·æ±‚è¶…æ—¶æ—¶é—´ (ç§’)
REQUEST_TIMEOUT=300

# ä»»åŠ¡è½®è¯¢é—´éš” (ç§’)
TASK_POLL_INTERVAL=2

# æœ€å¤§é‡è¯•æ¬¡æ•°
MAX_RETRY_COUNT=3

# ============================================
# å®‰å…¨é…ç½®
# ============================================
# å…è®¸çš„è·¨åŸŸæº (ç”Ÿäº§ç¯å¢ƒè®¾ç½®å…·ä½“åŸŸå)
ALLOWED_ORIGINS=*

# å¯ç”¨ API Key è®¤è¯ (å¯é€‰)
ENABLE_API_KEY_AUTH=false

# API Key (å¦‚å¯ç”¨è®¤è¯)
API_KEY=your-api-key-here

# ============================================
# ç¼©ç•¥å›¾é…ç½®
# ============================================
# ç¼©ç•¥å›¾æœ€å¤§å°ºå¯¸ (åƒç´ )
THUMBNAIL_MAX_SIZE=400

# ç¼©ç•¥å›¾è´¨é‡ (1-100)
THUMBNAIL_QUALITY=85

# ============================================
# æ—¥å¿—é…ç½®
# ============================================
# æ—¥å¿—æ–‡ä»¶è·¯å¾„
LOG_FILE=./logs/app.log

# æ—¥å¿—è½®è½¬å¤§å° (MB)
LOG_MAX_SIZE=100

# ä¿ç•™æ—¥å¿—æ–‡ä»¶æ•°é‡
LOG_BACKUP_COUNT=10

# ============================================
# å¼€å‘é…ç½® (ä»…å¼€å‘ç¯å¢ƒä½¿ç”¨)
# ============================================
# çƒ­é‡è½½
HOT_RELOAD=true

# æ˜¾ç¤º SQL æŸ¥è¯¢
SHOW_SQL=false
```

### 4.4 Docker é…ç½®ç¤ºä¾‹

**Dockerfile** (backend):
```dockerfile
# å¤šé˜¶æ®µæ„å»º
FROM python:3.11-slim as builder

WORKDIR /build

# å®‰è£…æ„å»ºä¾èµ–
RUN apt-get update && apt-get install -y \
    gcc \
    && rm -rf /var/lib/apt/lists/*

# å¤åˆ¶ä¾èµ–æ–‡ä»¶
COPY requirements.txt .

# å®‰è£… Python ä¾èµ–
RUN pip install --no-cache-dir --user -r requirements.txt

# ============ è¿è¡Œé˜¶æ®µ ============
FROM python:3.11-slim

WORKDIR /app

# å®‰è£…è¿è¡Œæ—¶ä¾èµ–
RUN apt-get update && apt-get install -y \
    libpq5 \
    && rm -rf /var/lib/apt/lists/*

# ä»æ„å»ºé˜¶æ®µå¤åˆ¶å·²å®‰è£…çš„åŒ…
COPY --from=builder /root/.local /root/.local

# ç¡®ä¿ Python åŒ…åœ¨ PATH ä¸­
ENV PATH=/root/.local/bin:$PATH

# å¤åˆ¶åº”ç”¨ä»£ç 
COPY app/ ./app/

# åˆ›å»ºæ•°æ®ç›®å½•
RUN mkdir -p data/images data/thumbnails logs

# æš´éœ²ç«¯å£
EXPOSE 8000

# å¥åº·æ£€æŸ¥
HEALTHCHECK --interval=30s --timeout=10s --start-period=5s --retries=3 \
    CMD python -c "import requests; requests.get('http://localhost:8000/api/v1/health')"

# å¯åŠ¨å‘½ä»¤
CMD ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "8000"]
```

**docker-compose.yml**:
```yaml
version: '3.8'

services:
  backend:
    build:
      context: ./backend
      dockerfile: Dockerfile
    container_name: volc-image-gen-backend
    restart: unless-stopped
    environment:
      - VOLC_ACCESS_KEY=${VOLC_ACCESS_KEY}
      - VOLC_SECRET_KEY=${VOLC_SECRET_KEY}
      - VOLC_REGION=${VOLC_REGION:-cn-beijing}
      - APP_DEBUG=${APP_DEBUG:-false}
      - APP_LOG_LEVEL=${APP_LOG_LEVEL:-INFO}
      - DATABASE_URL=sqlite+aiosqlite:///./data/database.db
      - MAX_CONCURRENT_TASKS=${MAX_CONCURRENT_TASKS:-5}
    volumes:
      - ./backend/data:/app/data
      - ./backend/logs:/app/logs
    networks:
      - app-network
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8000/api/v1/health"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s

  nginx:
    image: nginx:alpine
    container_name: volc-image-gen-nginx
    restart: unless-stopped
    ports:
      - "${APP_PORT:-8080}:80"
    volumes:
      - ./frontend/nginx.conf:/etc/nginx/nginx.conf:ro
      - ./frontend/static:/usr/share/nginx/html/static:ro
      - ./frontend/templates:/usr/share/nginx/html:ro
    depends_on:
      - backend
    networks:
      - app-network
    healthcheck:
      test: ["CMD", "wget", "--quiet", "--tries=1", "--spider", "http://localhost/"]
      interval: 30s
      timeout: 10s
      retries: 3

networks:
  app-network:
    driver: bridge

volumes:
  backend-data:
  backend-logs:
```

## 5. è´¨é‡ä¿è¯

### 5.1 ä»£ç è´¨é‡æ£€æŸ¥æ¸…å•

- [ ] æ‰€æœ‰ API ç«¯ç‚¹æœ‰å®Œæ•´çš„ç±»å‹æ³¨è§£
- [ ] å…³é”®å‡½æ•°æœ‰ docstring
- [ ] éµå¾ª PEP 8 è§„èŒƒ (black æ ¼å¼åŒ–)
- [ ] æ—  flake8 è­¦å‘Š
- [ ] mypy ç±»å‹æ£€æŸ¥é€šè¿‡
- [ ] å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 80%

### 5.2 åŠŸèƒ½æµ‹è¯•æ¸…å•

- [ ] å›¾åƒç”ŸæˆåŠŸèƒ½æ­£å¸¸
- [ ] ä»»åŠ¡çŠ¶æ€æŸ¥è¯¢å‡†ç¡®
- [ ] å†å²è®°å½•æ­£ç¡®ä¿å­˜
- [ ] å›¾ç‰‡ä¸‹è½½åŠŸèƒ½æ­£å¸¸
- [ ] é”™è¯¯å¤„ç†å¾—å½“
- [ ] UI åœ¨ä¸åŒåˆ†è¾¨ç‡ä¸‹æ­£å¸¸æ˜¾ç¤º
- [ ] API æ–‡æ¡£å®Œæ•´å¯ç”¨

### 5.3 æ€§èƒ½æµ‹è¯•æŒ‡æ ‡

- [ ] API å“åº”æ—¶é—´ < 200ms (ä¸å«å›¾åƒç”Ÿæˆ)
- [ ] å›¾åƒç”Ÿæˆæ—¶é—´ < 30s (å–å†³äºç«å±±å¼•æ“)
- [ ] å¹¶å‘ 10 ä¸ªä»»åŠ¡ä¸å´©æºƒ
- [ ] å†…å­˜å ç”¨ < 500MB (ç©ºé—²çŠ¶æ€)
- [ ] å®¹å™¨å¯åŠ¨æ—¶é—´ < 10s

## 6. é£é™©è¯„ä¼°å’Œåº”å¯¹

| é£é™© | å¯èƒ½æ€§ | å½±å“ | åº”å¯¹æªæ–½ |
|------|--------|------|----------|
| ç«å±±å¼•æ“ API é™æµ | ä¸­ | é«˜ | å®ç°é˜Ÿåˆ—å’Œé‡è¯•æœºåˆ¶ |
| ç½‘ç»œä¸ç¨³å®š | ä¸­ | ä¸­ | å¢åŠ è¶…æ—¶å’Œé‡è¯• |
| å­˜å‚¨ç©ºé—´ä¸è¶³ | ä½ | ä¸­ | è‡ªåŠ¨æ¸…ç†ç­–ç•¥ |
| å¹¶å‘è¿‡è½½ | ä¸­ | é«˜ | é™åˆ¶æœ€å¤§å¹¶å‘æ•° |
| ä¾èµ–åŒ…ç‰ˆæœ¬å†²çª | ä½ | ä½ | ä½¿ç”¨ Docker éš”ç¦» |

## 7. äº¤ä»˜æ ‡å‡†

### 7.1 å¿…é¡»äº¤ä»˜

- âœ… å®Œæ•´çš„æºä»£ç 
- âœ… Docker é•œåƒå’Œé…ç½®
- âœ… README ä½¿ç”¨æ–‡æ¡£
- âœ… API æ–‡æ¡£ (Swagger)
- âœ… ç¯å¢ƒå˜é‡é…ç½®ç¤ºä¾‹
- âœ… åŸºç¡€åŠŸèƒ½æ¼”ç¤º

### 7.2 å»ºè®®äº¤ä»˜

- âœ… æŠ€æœ¯æ–¹æ¡ˆæ–‡æ¡£
- âœ… æ¶æ„è®¾è®¡æ–‡æ¡£
- âœ… å®æ–½è®¡åˆ’
- [ ] è§†é¢‘æ¼”ç¤º
- [ ] æ•…éšœæ’æŸ¥æŒ‡å—
- [ ] æ€§èƒ½æµ‹è¯•æŠ¥å‘Š

## 8. åç»­ä¼˜åŒ–æ–¹å‘

### çŸ­æœŸ (1-2 å‘¨)
- [ ] æ·»åŠ æ›´å¤š AI æ¨¡å‹æ”¯æŒ
- [ ] å®ç°å›¾ç”Ÿå›¾åŠŸèƒ½
- [ ] æ·»åŠ æç¤ºè¯æ¨¡æ¿åº“
- [ ] ä¼˜åŒ–ç§»åŠ¨ç«¯ä½“éªŒ

### ä¸­æœŸ (1-2 æœˆ)
- [ ] ç”¨æˆ·ç³»ç»Ÿå’Œè®¤è¯
- [ ] å¤šç”¨æˆ·éš”ç¦»
- [ ] äº‘å­˜å‚¨é›†æˆ (OSS)
- [ ] WebSocket å®æ—¶æ¨é€

### é•¿æœŸ (3-6 æœˆ)
- [ ] å¾®æœåŠ¡æ¶æ„æ”¹é€ 
- [ ] åˆ†å¸ƒå¼ä»»åŠ¡é˜Ÿåˆ—
- [ ] å›¾ç‰‡ç¼–è¾‘åŠŸèƒ½
- [ ] AI æç¤ºè¯ä¼˜åŒ–
- [ ] æ•°æ®åˆ†æé¢æ¿

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2024-01-01  
**é¢„è®¡æ€»å·¥æ—¶**: 13 ä¸ªå·¥ä½œæ—¥ (çº¦ 3 å‘¨)
